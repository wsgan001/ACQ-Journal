import sys
from PyQt5.QtWidgets import (QApplication, QWidget, QRadioButton,
    QPushButton, QButtonGroup, QHBoxLayout, QVBoxLayout, QGridLayout,
    QFileDialog)
from PyQt5.QtCore import Qt
from matplotlib.pyplot import connect
from _signal import signal
from click._unicodefun import click
from sqlalchemy.sql.expression import false

class MiniPricerInterface(QWidget):
    id = 0

    def __init__(self):
        super().__init__()
        self.display()

    def initUI(self):

        hboxLyt = QHBoxLayout()
        vboxLytClick = QVBoxLayout()
        vboxLytButton = QVBoxLayout()
        
        funcBtnGroup = QButtonGroup(self) # Number group
    
        
        r0 = QRadioButton("Q1 EU call/put option",value=0)
        r1 = QRadioButton("Q2 Implied Volatility",value=1)
        r2 = QRadioButton("Q3 US call/put option",value=2)
        r3 = QRadioButton("Q4 Geometric Asian option",value=3)
        self.r4 = QRadioButton("Q5 Arithmetic Asian option",value=4)
        r5 = QRadioButton("Q6 Geometric basket option",value=5)
        self.r6 = QRadioButton("Q7 Arithmetic basket option",value=6)
        self.r7 = QRadioButton("Standard",value=7)
        self.r8 = QRadioButton("Control Variate",value=8)
        self.r7.setVisible(False)
        self.r8.setVisible(False)
        
        funcBtnGroup.addButton(r0)
        funcBtnGroup.addButton(r1)
        funcBtnGroup.addButton(r2)
        funcBtnGroup.addButton(r3)
        funcBtnGroup.addButton(self.r4)
        funcBtnGroup.addButton(r5)
        funcBtnGroup.addButton(self.r6)
        funcBtnGroup.buttonClicked[int].connect(self.funcBtnGroup_clicked)
        funcBtnGroup.buttonClicked[int].connect(self.setVsbl)
        vboxLytClick.addWidget(r0)
        vboxLytClick.addWidget(r1)
        vboxLytClick.addWidget(r2)
        vboxLytClick.addWidget(r3)
        vboxLytClick.addWidget(self.r4)
        vboxLytClick.addWidget(r5)
        vboxLytClick.addWidget(self.r6)

        btn = QPushButton('Select File', self)
        calButton = QPushButton("Calculate")
        #btn.setToolTip('This is a <b>QPushButton</b> widget')
        btn.resize(btn.sizeHint())
        btn.move(50, 50)
        btn.clicked.connect(self.showDialog)
#-----------------------------------------------
        vboxLytClick.setAlignment(Qt.AlignTop)
        vboxLytButton.addWidget(self.r7)
        vboxLytButton.addWidget(self.r8)
        vboxLytButton.addWidget(btn)
        vboxLytButton.addWidget(calButton)
        hboxLyt.addLayout(vboxLytClick)
        hboxLyt.addLayout(vboxLytButton)
        self.setLayout(hboxLyt)

        self.resize(500,500)
        self.setGeometry(300, 300, 300, 220)
        self.setWindowTitle('MiniPricer')
        #self.setWindowIcon(QIcon('web.png'))
        self.show() 
    

    def funcBtnGroup_clicked(self,buttonid):
        self.id = buttonid
    
    def setVsbl(self,buttonid):
        case = buttonid
        if case==4 or 6:
           self.r7.setVisible(True)
           self.r8.setVisible(True)
        else:
            self.r7.setVisible(False)
            self.r8.setVisible(False)
    
    def display(self):
        
        self.initUI()
        case=self.id
        print(case)
       
#         

    def showDialog(self):
        print(self.id)
        fname = QFileDialog.getOpenFileName(self, 'Open file', sys.path[0])

        if fname[0]:
            print(fname[0])

if __name__ == '__main__':

    app = QApplication(sys.argv)
    ex = MiniPricerInterface()
    sys.exit(app.exec_())
