package hku.variant.variant4;

import hku.Config;
import hku.algo.DataReader;
import hku.algo.TNode;
import hku.algo.index.AdvancedIndex;
import hku.algo.online.BasicG;
import hku.algo.online.BasicW;
import hku.algo.query2.Dec;
import hku.algo.query2.DecRevision;
import hku.algo.query2.DecShare;
import hku.variant.variant4.*;



public class BasicV3Test {


public static void main(String []args){
	int graph[][] = new int[11][];
	int a1[] = {2, 3, 4, 5};	graph[1] = a1;
	int a2[] = {1, 3, 4,5};		graph[2] = a2;
	int a3[] = {1, 2, 4};		graph[3] = a3;
	int a4[] = {1, 2, 3, 6};	graph[4] = a4;
	int a5[] = {1, 2, 7};		graph[5] = a5;
	int a6[] = {4};			graph[6] = a6;
	int a7[] = {5};			graph[7] = a7;
	int a8[] = {9};				graph[8] = a8;
	int a9[] = {8};	graph[9] = a9;
	int a10[] ={};	graph[10] = a10;
	
	
	
	String nodes[][] = new String[graph.length][];
	String b1[] = {"1","w", "x", "y"};	nodes[1] = b1;
	String b2[] = {"2","x"};	nodes[2] = b2;
	String b3[] = {"3","x", "y"};	nodes[3] = b3;
	String b4[] = {"4","z", "x", "y"};	nodes[4] = b4;
	String b5[] = {"5","y", "z"};	nodes[5] = b5;
	String b6[] = {"6","y"};	nodes[6] = b6;
	String b7[] = {"7","x", "y"};	nodes[7] = b7;
	String b8[] = {"8","y", "z"};	nodes[8] = b8;
	String b9[] = {"9","x"};	nodes[9] = b9;
	String b10[] = {"10","x"};	nodes[10] = b10;
	
//	int queryset[]={5};
//	String[] kws={"x","y","z","w"};
//	Config.k=1;
//	BasicGV3_V2 basic=new BasicGV3_V2(nodes, graph);
//	basic.query(queryset, kws);
//	basic.testOutput();
	
//	DataReader dataReader=new DataReader(Config.flickrGraph, Config.flickrNode);
	DataReader dataReader=new DataReader(Config.dblpGraph, Config.dblpNode);
	int[][] g=dataReader.readGraph();
	String[][] n=dataReader.readNode();
	
	
	Config.k=9;
	int queryset[]={152532,17891};//152532:jim gary 17891:Gerhard Weikum
	String[] kwStrings={"art","research","test","data" ,"management","system","transaction"};
	
//	
	
//	BasicG basicG=new BasicG(g, n);
//	basicG.query(152532);
//	
//	BasicW basicW=new BasicW(g, n);
//	basicW.query(152532);
//	
//	AdvancedIndex advancedIndex=new AdvancedIndex(g, n);
//	TNode root=advancedIndex.build();
//	Dec dec=new Dec(g, n, root);
//	dec.query(152532);
	
//	BasicGV3_V2  basicGV3_V2=new BasicGV3_V2(n, g);
//	basicGV3_V2.query(kwStrings, queryset);
//	basicGV3_V2.testOutput();
//	
//	BasicWV3_V2 basicWV3_V2=new BasicWV3_V2(n, g);
//	Long time1=System.nanoTime();
//	basicWV3_V2.query(queryset,kwStrings);
//	basicWV3_V2.testOutput();
//	Long time2=System.nanoTime()-time1;
//	System.out.println(time2/1000000);
//	
	AdvancedIndex advancedIndex=new AdvancedIndex(g, n);
	TNode root=advancedIndex.build();
	SW_V2 s1=new SW_V2(n,g,root);
	Long time5=System.nanoTime();
	s1.query(queryset, kwStrings);
	s1.testOutput();
	Long time6=System.nanoTime()-time5;
  	System.out.println(time6/1000000);
//	s1.testOutput();
//	
  	
//  	DecRevision de1=new DecRevision(g, n, root);
//  	Long time7=System.nanoTime();
//  	de1.query(queryset[0]);
//  	Long time8=System.nanoTime()-time7;
//  	System.out.println(time8/1000000);
	

}
}
